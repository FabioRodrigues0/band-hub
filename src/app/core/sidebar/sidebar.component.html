<aside class="flex flex-col h-full bg-zinc-900 text-zinc-400 w-64 p-4">
    <!-- Navigation -->
    <nav class="flex-1">
        <ul class="space-y-2">
            <li *ngFor="let item of navigationItems">
                <a [routerLink]="item.route"
                   routerLinkActive="bg-zinc-800 text-white"
                   [routerLinkActiveOptions]="{exact: item.route === '/'}"
                   class="flex items-center px-4 py-2 text-sm font-medium rounded-md hover:bg-zinc-800 hover:text-white transition-colors">
                    <i [class]="item.icon + ' text-lg mr-3'"></i>
                    {{ item.label }}
                </a>
            </li>
        </ul>
    </nav>

    <!-- User Section -->
    <div class="mt-auto pt-4 border-t border-zinc-800">
        <div class="relative" *ngIf="auth.isAuthenticated$ | async as isAuthenticated">
            <ng-container *ngIf="isAuthenticated; else loginButton">
                <button (click)="toggleUserMenu()"
                        class="flex items-center w-full px-4 py-2 text-sm font-medium rounded-md hover:bg-zinc-800 transition-colors">
                    <!-- User Avatar -->
                    <div class="relative">
                        <ng-container *ngIf="auth.currentUser$ | async as user; else userInitial">
                            <ng-container *ngIf="user?.image; else userInitial">
                                <img [src]="user.image"
                                     [alt]="getUserName(user)"
                                     class="h-8 w-8 rounded-full">
                            </ng-container>
                            <ng-template #userInitial>
                                <div class="h-8 w-8 rounded-full bg-indigo-600 flex items-center justify-center text-white">
                                    {{ getUserInitial(user) }}
                                </div>
                            </ng-template>
                        </ng-container>
                    </div>
                    <span class="ml-3 text-sm font-medium text-white">{{ getUserName(auth.currentUser$ | async) }}</span>
                </button>

                <!-- User Menu -->
                <div *ngIf="isUserMenuOpen"
                     class="absolute bottom-full left-0 w-48 mb-2 py-1 bg-zinc-800 rounded-md shadow-lg">
                    <a routerLink="/profile"
                       class="block px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 transition-colors">
                        Profile
                    </a>
                    <a routerLink="/settings"
                       class="block px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 transition-colors">
                        Settings
                    </a>
                    <button (click)="logout()"
                            class="w-full text-left px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-700 transition-colors">
                        Sign out
                    </button>
                </div>
            </ng-container>
            <ng-template #loginButton>
                <a routerLink="/login"
                   class="flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors">
                    Sign in
                </a>
            </ng-template>
        </div>
    </div>
</aside>
